version: '3.3'
configs:
  challange-programma-local:
    external:
      name: challange-programma-local-v1
services:
  app:
    image: challange-programma
    depends_on:
    - mysql
    build: .
    networks:
    - frontend
    - backend
    ports:
    - "7894:80"
    configs:
      - source: challange-programma-local
        target: /var/www/.env
        mode: 0444

  mysql:
    image: mariadb
    networks:
    - backend
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: insecure
      MYSQL_DATABASE: challange-programma
      MYSQL_USER: challange-programma
      MYSQL_PASSWORD: insecure

networks:
  frontend:
  backend:
